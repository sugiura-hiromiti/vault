---
id: 25042007560997
aliases:
  - enum_diff_between_rust_and_c
tags:
  - tech/rust/macro
  - tech/osdev
created: 250420 07:56:09
updated: 2025-06-10T06:33
---

# RustとCにおける列挙型の違い

RustとCにおいて、列挙型の扱いは大きく違う。OS開発の際はCとFFIを介してやり取りする事が多いのだが、C側の関数で引数が列挙型になっている場合、Rustの列挙型をそのまま渡すのは以下の2つの観点から好ましくない

- Cでは定義されていない列挙子を返す事が許されているが、Rustでは未定義動作を引き起こす
- Cでは列挙型は整数に暗黙の型変換が行える

# 解決法

解決策はいくつかある。一つはRust側で構造体として定義しておいて、列挙子は関連定数として定義しておく方法

